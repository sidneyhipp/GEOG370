(window.webpackJsonp_ember_auto_import_=window.webpackJsonp_ember_auto_import_||[]).push([[746],{928:function(e,t,i){"use strict"
i.r(t),i.d(t,"hub_download_notice",(function(){return l}))
var s=i(96),a=i(1224)
const l=class{constructor(e){Object(s.k)(this,e),this.fileStatus=void 0,this.exportRequested=!1,this.apiError=void 0,this.cannotExport=!1}async componentWillLoad(){this.intl=await a.a.loadIntlForComponent(this.element),this.setLabels(),this.resetUndefinedProps()}resetUndefinedProps(){["fileStatus","exportRequested","apiError"].forEach(e=>{this[e]="undefined"===this[e]?void 0:this[e]})}async setLocalization(){this.setLabels()}setLabels(){this.labels={titleFileGeneration:this.intl.t("titleFileGeneration"),titleDatasetNotFound:this.intl.t("titleDatasetNotFound"),titleApiError:this.intl.t("titleApiError"),titleFormatDisabled:this.intl.t("titleFormatDisabled"),titleFileGenerationFailed:this.intl.t("titleFileGenerationFailed"),messageCreatingFile:this.intl.t("messageCreatingFile"),messageUpdatingFile:this.intl.t("messageUpdatingFile"),messageFailedStaleAvailable:this.intl.t("messageFailedStaleAvailable"),messageFileNeedsGenerating:this.intl.t("messageFileNeedsGenerating"),messageFormatDisabled:this.intl.t("messageFormatDisabled")}}getNoticeTitle(){return"disabled"===this.fileStatus?this.labels.titleFormatDisabled:this.exportInProgress()?this.labels.titleFileGeneration:"404"===this.apiError?this.labels.titleDatasetNotFound:this.apiError?this.labels.titleApiError:this.requestedExportHasFailed()?this.labels.titleFileGenerationFailed:void 0}getNoticeMessage(){return"disabled"===this.fileStatus?this.labels.messageFormatDisabled:"creating"===this.fileStatus?this.labels.messageCreatingFile:"updating"===this.fileStatus?this.labels.messageUpdatingFile:this.downloadCached()&&this.requestedExportHasFailed()?this.labels.messageFailedStaleAvailable:"ready_unknown"===this.fileStatus?this.labels.messageFileNeedsGenerating:"locked"===this.fileStatus||"stale_locked"===this.fileStatus?this.labels.messageDataSourceLocked:(this.downloadCached(),this.labels.messageFileNeedsGenerating)}shouldShowMessage(){return!this.apiError&&!this.exportFailed()&&!this.requestedExportIsReady()}_getNoticeKind(){return this.requestedExportHasFailed()||this.apiError?"danger":"warning"}exportFailed(){return"error"===this.fileStatus||"error_creating"===this.fileStatus||"error_updating"===this.fileStatus}exportInProgress(){return"creating"===this.fileStatus||"updating"===this.fileStatus}requestedExportIsReady(){return this.exportRequested&&this.downloadUpToDate()}requestedExportHasFailed(){const{exportRequested:e,fileStatus:t}=this
return e&&("error"===t||"error_updating"===t||"error_creating"===t)}downloadCached(){return["ready","ready_unknown","stale","updating","error_updating"].includes(this.fileStatus)}downloadUpToDate(){return"ready"===this.fileStatus}shouldHide(){return this.downloadUpToDate()||this.cannotExport||this.exportFailed()&&!this.exportRequested}render(){if(this.shouldHide())return Object(s.i)("calcite-notice",{open:!1})
const e=this.shouldShowMessage()?Object(s.i)("div",{slot:"message"},this.getNoticeMessage()):null
return Object(s.i)("calcite-notice",{dir:"ltr",kind:this._getNoticeKind(),open:!0,scale:"m",width:"full"},Object(s.i)("div",{slot:"title"},Object(s.i)("calcite-loader",{hidden:!this.exportInProgress(),inline:!0,label:this.getNoticeMessage()}),this.getNoticeTitle()),e)}static get assetsDirs(){return["locales"]}get element(){return Object(s.c)(this)}}
l.style="div{font-size:var(--calcite-font-size--1);line-height:1rem}calcite-notice{margin-bottom:0.5rem}calcite-loader{margin-right:0.5rem}calcite-loader[active]{display:inline-block}"}}])
